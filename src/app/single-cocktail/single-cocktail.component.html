<div *ngIf="cocktail && !loading" class="w-full mx-auto justify-center h-full px-6 lg:px-16 py-6  flex flex-col">

  <!-- Section supérieure : Titre, image et ingrédients -->
  <div class="w-full flex flex-col md:flex-row items-stretch mb-10 gap-6">
    <!-- Colonne gauche : Titre et Carrousel image/vidéo -->
<div class="flex flex-col h-full items-center md:w-2/5">
  <h1 class="text-3xl lg:text-4xl font-bold mb-4 text-center">{{ cocktail.strDrink }}</h1>

  <!-- Carrousel -->
  <div class="relative w-4/5 md:w-full lg:w-3/4 h-[250px] md:h-[350px] rounded-xl overflow-hidden shadow-lg mb-4">
    <ng-container *ngIf="mediaItems.length > 0">
      <div class="absolute inset-0 transition-opacity duration-500">
        <ng-container [ngSwitch]="mediaItems[selectedIndex].type">
          <img 
            *ngSwitchCase="'image'"
            [src]="mediaItems[selectedIndex].src"
            alt="{{ cocktail.strDrink }}" 
            class="w-full h-full object-cover"
          />
          <iframe 
            *ngSwitchCase="'video'"
            [src]="mediaItems[selectedIndex].src" 
            class="w-full h-full"
            frameborder="0"
            allowfullscreen
            title="Video of {{ cocktail.strDrink }}"
          ></iframe>
        </ng-container>
      </div>

      <!-- Boutons navigation -->
       <div *ngIf="mediaItems.length > 1" >
        <button aria-label="Previous slide" (click)="prevSlide()" class="absolute top-1/2 left-2  bg-white/80 hover:bg-white rounded-full p-1">
          ◀
        </button>
        <button aria-label="Next slide" (click)="nextSlide()" class="absolute top-1/2 right-2  bg-white/80 hover:bg-white rounded-full p-1">
          ▶
        </button>
       </div>
     
    </ng-container>
  </div>

  <p class="mb-2 text-gray-700 text-center">{{ cocktail.strCategory }} | {{ cocktail.strAlcoholic }}</p>

  <!-- Tags -->
  <div class="flex flex-wrap justify-center gap-2 text-xs mb-4">
    <span 
      *ngFor="let item of tags" 
      class="bg-indigo-500 text-white px-3 py-1 rounded-full max-w-[120px] truncate"
      title="{{ item }}"
    >
      {{ item }}
    </span>
  </div>
</div>


    <!-- Colonne droite : Ingrédients -->
    <div class="flex flex-col w h-full items-center md:w-3/5">
      <h2 class="text-xl text-center  lg:text-2xl font-semibold mb-4">Ingrédients</h2>
      <div class="flex flex-wrap w-full gap-4 mb-4">
        <div *ngFor="let item of ingredients" class="mx-auto text-center">
          <img 
            [src]="item.imageUrl" 
            [alt]="item" 
            (error)="item.imageUrl = 'assets/images/default-fallback-image.png'"
            class="w-[80px] h-[80px] md:w-[100px] md:h-[100px]  mx-auto mb-2 object-contain" 
          />
          <p class="text-sm lg:text-base">{{ item.ingredient }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Section inférieure : Instructions et verre -->
  <div class="w-full flex flex-col items-center mb-10">
    <h2 class="text-xl lg:text-2xl font-semibold mb-2">Instructions</h2>
    <p class="text-gray-800 leading-relaxed">{{ cocktail.strInstructionsFR || cocktail.strInstructions }}</p>

    <h2 class="text-xl lg:text-2xl font-semibold mt-6 mb-2">Verre</h2>
    <p class="text-gray-800">{{ cocktail.strGlass }}</p>

    <button 
      (click)="handleNavigateBack()"
      class="mt-6 inline-block bg-indigo-600 text-white px-6 py-3 rounded hover:bg-indigo-700 transition w-fit mx-auto shadow-md"
    >
      Retour
    </button>
  </div>
</div>